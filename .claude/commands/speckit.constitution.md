---
description: 대화형 또는 제공된 헌장 입력에서 프로젝트 헌장을 생성하거나 업데이트하고 모든 종속 템플릿이 동기화 상태를 유지하도록 합니다.
---

## 사용자 입력

```text
$ARGUMENTS
```

입력이 비어있지 않으면 계속 진행하기 전에 **반드시** 사용자 입력을 고려해야 합니다.

## 개요

`.specify/memory/constitution.md`에 있는 프로젝트 헌장을 업데이트합니다. 이 파일은 대괄호 안에 자리 표시자 토큰을 포함하는 템플릿입니다 (예: `[PROJECT_NAME]`, `[PRINCIPLE_1_NAME]`). 귀하의 작업은 (a) 구체적인 값을 수집/도출하고, (b) 템플릿을 정확하게 채우고, (c) 종속 아티팩트 전체에 수정 사항을 전파하는 것입니다.

다음 실행 흐름을 따르십시오:

1. `.specify/memory/constitution.md`에 있는 기존 헌장 템플릿을 로드합니다.
   - `[ALL_CAPS_IDENTIFIER]` 형식의 모든 자리 표시자 토큰을 식별합니다.
   **중요**: 사용자가 템플릿에 사용된 것보다 적거나 많은 헌장을 요구할 수 있습니다. 숫자가 지정된 경우 존중하십시오 - 일반 템플릿을 따르십시오. 그에 따라 문서를 업데이트합니다.

2. 자리 표시자에 대한 값 수집/도출:
   - 사용자 입력 (대화)이 값을 제공하는 경우 사용합니다.
   - 그렇지 않으면 기존 저장소 컨텍스트에서 추론합니다 (README, docs, 이전 헌장 버전이 포함된 경우).
   - 거버넌스 날짜의 경우: `RATIFICATION_DATE`는 원래 채택 날짜입니다 (알 수 없는 경우 질문하거나 TODO로 표시), `LAST_AMENDED_DATE`는 변경이 이루어진 경우 오늘이며, 그렇지 않으면 이전 날짜를 유지합니다.
   - `CONSTITUTION_VERSION`은 의미론적 버전 관리 규칙에 따라 증가해야 합니다:
     * MAJOR: 이전 버전과 호환되지 않는 거버넌스/헌장 제거 또는 재정의.
     * MINOR: 새로운 헌장/섹션 추가 또는 실질적으로 확장된 지침.
     * PATCH: 명확화, 표현, 오타 수정, 비의미적 개선.
   - 버전 범프 유형이 모호한 경우 완료하기 전에 근거를 제안합니다.

3. 업데이트된 헌장 내용 초안 작성:
   - 모든 자리 표시자를 구체적인 텍스트로 교체합니다 (프로젝트가 아직 정의하지 않기로 선택한 의도적으로 유지된 템플릿 슬롯을 제외하고는 대괄호로 묶인 토큰이 남아 있지 않음—남겨진 것은 명시적으로 정당화).
   - 제목 계층 및 주석을 유지하면 교체된 후에 제거할 수 있습니다 (여전히 명확한 지침을 추가하지 않는 한).
   - 각 헌장 섹션이: 간결한 이름 줄, 협상 불가능한 규칙을 포착하는 단락 (또는 불릿 목록), 명백하지 않은 경우 명시적 근거를 보장합니다.
   - 거버넌스 섹션이 수정 절차, 버전 관리 정책 및 규정 준수 검토 기대를 나열하는지 확인합니다.

4. 일관성 전파 체크리스트 (이전 체크리스트를 활성 검증으로 변환):
   - `.specify/templates/plan-template.md`를 읽고 "헌장 확인" 또는 규칙이 업데이트된 헌장과 일치하는지 확인합니다.
   - `.specify/templates/spec-template.md`를 읽어 범위/요구사항 정렬—헌장이 필수 섹션 또는 제약 조건을 추가/제거하는 경우 업데이트합니다.
   - `.specify/templates/tasks-template.md`를 읽고 작업 분류가 새롭거나 제거된 헌장 기반 작업 유형 (예: 관찰 가능성, 버전 관리, 테스트 규율)을 반영하는지 확인합니다.
   - `.specify/templates/commands/*.md`의 각 명령 파일을 읽어 일반 지침이 필요할 때 오래된 참조 (CLAUDE와 같은 에이전트별 이름만)가 남아 있지 않은지 확인합니다.
   - 런타임 지침 문서를 읽습니다 (예: `README.md`, `docs/quickstart.md` 또는 에이전트별 지침 파일이 있는 경우). 변경된 헌장에 대한 참조를 업데이트합니다.

5. 동기화 영향 보고서 생성 (업데이트 후 헌장 파일 맨 위에 HTML 주석으로 추가):
   - 버전 변경: 이전 → 새로운
   - 수정된 헌장 목록 (이름이 변경된 경우 이전 제목 → 새 제목)
   - 추가된 섹션
   - 제거된 섹션
   - 업데이트가 필요한 템플릿 (✅ 업데이트됨 / ⚠ 보류 중) 및 파일 경로
   - 의도적으로 연기된 자리 표시자가 있는 경우 후속 TODO

6. 최종 출력 전 검증:
   - 설명되지 않은 대괄호 토큰이 남아 있지 않음.
   - 버전 라인이 보고서와 일치.
   - 날짜 ISO 형식 YYYY-MM-DD.
   - 헌장은 선언적이고 테스트 가능하며 모호한 언어가 없음 ("should" → 적절한 경우 MUST/SHOULD 근거로 교체).

7. 완성된 헌장을 `.specify/memory/constitution.md`에 다시 씁니다 (덮어쓰기).

8. 사용자에게 최종 요약을 출력합니다:
   - 새 버전 및 범프 근거.
   - 수동 후속 조치로 플래그가 지정된 파일.
   - 제안된 커밋 메시지 (예: `docs: amend constitution to vX.Y.Z (principle additions + governance update)`).

서식 및 스타일 요구사항:
- 템플릿과 정확히 동일한 마크다운 제목 사용 (수준을 강등/승진하지 마십시오).
- 가독성을 유지하기 위해 긴 근거 라인을 감쌉니다 (<100자 이상적) 그러나 어색한 중단으로 하드 적용하지 마십시오.
- 섹션 사이에 단일 빈 줄을 유지합니다.
- 후행 공백을 피합니다.

사용자가 부분 업데이트를 제공하는 경우 (예: 하나의 헌장 수정만), 여전히 검증 및 버전 결정 단계를 수행합니다.

중요한 정보가 누락된 경우 (예: 비준 날짜를 정말 알 수 없음), `TODO(<FIELD_NAME>): explanation`을 삽입하고 연기된 항목 아래 동기화 영향 보고서에 포함합니다.

새 템플릿을 만들지 마십시오; 항상 기존 `.specify/memory/constitution.md` 파일에서 작업합니다.

## 사고 및 응답
반드시 모든 흐름의 출력과 응답, 사고는 우리말(한글)로 진행하시오.
